<!DOCTYPE html>
<html>
  <head>
    <title>Coffeequate</title>

    <meta charset="utf-8">
    <link rel="icon" type="image/ico" href="./images/icon.ico">
    <link href='https://fonts.googleapis.com/css?family=Oxygen' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/css3reset.css">
    <link rel="stylesheet" type="text/css" href="stylesheets/styles.css">
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="coffeequate.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css"></script>
    <style type="text/css">
      #title img {
        margin: 20pt auto 10pt auto;
        display: block;
      }
      #authors {
        text-align: center;
      }
      section article p, section article ul, .indent {
        padding-left: 20pt;
      }
      section article ul {
        margin-left: 20pt;
      }
      .cb {
        display: block;
        margin: 10pt auto;
      }
      .repl {
        border: 2px solid;
        border-radius: 5px;
        padding: 20px;
        background: lightgrey;
        width: 500px;
        margin: 0 auto;
      }
      .entry {width: 90%; height: 32px; display: inline-block; font-family: monospace; padding: 0; border: 0; font-size: 16px;}
      .entry:focus {background-color: #EFEFFF;}
      .entry-area {width: 100%; height: 32px; border: 1px solid #EAEAEA; padding: 0;}
      .entry-button {width: 10%; height: 32px; padding: 0; border: 0; margin: 0; vertical-align: top;}
      .scrollback {font-family: monospace; list-style-type: none; overflow: auto;}
    </style>
  </head>
  <body>
    <header id="title">
      <h1>Coffeequate</h1>
      A computer algebra system for JavaScript.
      <img src="images/coffeequate_small.png" alt="Coffeequate">

      <nav>
        <a href="https://github.com/MatthewJA/Coffeequate/releases">Releases</a> -
        <a href="https://github.com/MatthewJA/Coffeequate">GitHub</a> -
        <a href="https://github.com/MatthewJA/Coffeequate/issues">Issues</a> -
        <a href="./doc/">Code Documentation</a>
      </nav>
    </header>

    <section>
      <header><h2>Algebra in the browser</h2></header>
      <article>
        <p>
          No matter how hard you try, <code>-webkit-calc()</code> is not going to be able to solve an equation. Neither is JavaScript.

          That's where Coffeequate comes in.

          Coffeequate is a computer algebra system (CAS) for JavaScript. It can manipulate algebraic expressions, and solve and simplify equations.
        </p>
      </article>

      <header><h2>Features</h2></header>
      <article>
        <ul>
          <li>Solve quadratic and linear equations.</li>
          <li>Simplify most algebraic expressions.</li>
          <li>Propagate uncertainties in an expression.</li>
          <li>Substitute numbers and other expressions into existing expressions.</li>
          <li>Handle variables, constants, and symbolic constants (like π or G).</li>
        </ul>
      </article>

      <header><h2>Usage</h2></header>
      <article>
        <header><h3>Installation</h3></header>
        <p>
          To include Coffeequate on your page, just use a script tag:
          <code class="cb prettyprint">
            &lt;script type="text/javascript" src="coffeequate.min.js"&gt;&lt;/script&gt;
          </code>

          You can also load it with an AMD loader like <a href="http://requirejs.org/">RequireJS</a>.
          <code class="cb prettyprint">
            define(["lib/coffeequate.min"], function (CQ) {<br>
              // Use Coffeequate here!<br>
            });
          </code>
        </p>

        <p>
          If you really want, you can play around with Coffeequate in development by using this site's version of Coffeequate, CDN style. Obviously, this is not a good idea for production.
          <code class="cb prettyprint">
          &lt;script src="http://matthewja.com/Coffeequate/coffeequate.min.js"&gt;&lt;/script&gt;
          </code>
        </p>

        <header><h3>Using Coffeequate</h3></header>
        <p>
          Coffeequate gives you a <code class="prettyprint">CQ</code> function (or <code class="prettyprint">coffeequate</code> if you'd prefer). This function converts strings to Coffeequate expressions, which you can then operate on with methods.

          <code class="cb prettyprint">
            equ = CQ("Ek = 1/2 * m * v**2");<br>
            m = equ.solve("m"); // 2 * Ek * v**-2<br><br>
            expr = CQ("m * c**2");<br>
            expr = expr.sub({"m": CQ("F * a**-1"), "c": 10}); // 100 * F * a**-1
          </code>

          Valid terminals are variables, which are alphanumeric strings that begin with a letter; constants, which are numbers as digits which may include decimal points, or scientific notation (e.g. `2e-3`); or symbolic constants, which are variables preceded by a backslash. A list of known symbolic constants is located <a href="https://github.com/MatthewJA/Coffeequate/blob/master/coffeequate/src/constants.coffee">here</a>.

          The methods of an expression are listed below.</p>

        <ul>
          <li><code class="prettyprint">expr.solve(variable, equivalencies)</code> - Takes the name of a variable as a string, and returns the expression solved for this variable as an array of solutions. Expressions are automatically equated to zero.</li>
          <li><code class="prettyprint">expr.simplify(equivalencies)</code> - Return a simplified version of the expression.</li>
          <li><code class="prettyprint">expr.expand()</code> - Return an expanded version of the expression.</li>
          <li><code class="prettyprint">expr.sub(substitutions, equivalencies, substituteUncertainties, evaluateSymbolicConstants)</code> - Takes an object mapping variable names to values, and returns a new expression with each variable replaced by its value. Values can be numbers, other variables, or even other expressions. If substituteUncertainties is true (default is false), then instead of substituting the values into variables, the values will be substituted into the uncertainties of those variables instead. If evaluateSymbolicConstants is true (default is false), known symbolic constants will be evaluated.</li>
          <li><code class="prettyprint">expr.differentiate(variable, equivalencies)</code> - Takes the name of a variable as a string, and returns the expression solved for this variable as an array of solutions. Expressions are automatically equated to zero.</li>
          <li><code class="prettyprint">expr.getAllVariables()</code> - Returns an array of labels of variables that are in the expression.</li>
          <li><code class="prettyprint">expr.mapOverVariables(fun)</code> - Maps the function <code>fun</code> over all variables, replacing those variables with the return value of <code>fun(variable)</code>. Returns a new expression.</li>
          <li><code class="prettyprint">expr.getUncertainty()</code> - Returns an expression representing the uncertainty of this expression.</li>
          <li><code class="prettyprint">expr.toMathML()</code> - Returns a MathML string of the expression.</li>
          <li><code class="prettyprint">expr.toLaTeX()</code> - Returns a LaTeX string of the expression.</li>
          <li><code class="prettyprint">expr.toFunction(variables..., equivalencies)</code> - Takes multiple variable labels and returns a JavaScript function that takes values for those variables in order, and then substitutes them into the expression.</li>
          <li><code class="prettyprint">expr.copy()</code> - Recursively deep-copy the expression.</li>
        </ul>

        <p>
          <code>equivalencies</code> is an object mapping variable labels to an array of variable labels that that variable is equivalent to - for example, if <code>x</code> and <code>y</code> are equivalent, then you could have <code>equivalencies = {"x":["x", "y"], "y":["x", "y"]}</code>. Equivalencies is always an optional parameter.
        </p>

        <p>
          If you find yourself in need of checking the type of a CQ expression node, or you want to monkeypatch CQ, the raw nodes are provided in <code>CQ.raw</code>: <code>{Add, Mul, Pow, Terminal, Variable, Constant, SymbolicConstant, Uncertainty}</code>.
        </p>

      </article>

      <header><h2>Examples and REPL</h2></header>
      <article>
        <header><h3>REPL</h3></header>
        <p>
          Here's a JS REPL with Coffeequate v1.1.0 already loaded. Try it out!
        </p>
          <div class="repl"></div>

      </article>
      <article>
        <header><h3>Examples</h3></header>
        <p>
          Here are some examples of Coffeequate in use.
        </p>

        <div class="indent">
          <h4>Finding freefall speed</h4>
          <code class="cb prettyprint">
            kineticEnergy = CQ("Ek = 1/2 * m * v**2");<br>
            potentialEnergy = CQ("Ep = m * g * h");<br>
            // Substitute the potential energy into the kinetic energy.<br>
            // Then solve for v.<br>
            v = kineticEnergy.sub({Ek: potentialEnergy.solve("Ep")[0]}).solve("v");<br>
            v.toString(); // -1*sqrt(g*h*m)/sqrt(m/2), sqrt(g*h*m)/sqrt(m/2)
          </code>

          <h4>Finding freefall time</h4>
          <code class="cb prettyprint">
            projectile = CQ("s = u * t + 1/2 * a * t**2");<br>
            freefall = projectile.sub({u: 0, a: CQ("g")});<br>
            time = freefall.solve("t");<br>
            time.toString(); // -1*sqrt(s)/sqrt(g/2),sqrt(s)/sqrt(g/2)
          </code>

          <h4>Time dilation</h4>
          <code class="cb prettyprint">
            dilation = function(v) {<br>
            &nbsp; var td = CQ("Δt * (1 + -v**2 * c**-2)**(-1/2)");<br>
            &nbsp; return td.sub({"Δt": 1, "c": 3e8, "v": v});<br>
            };<br>
            dilation(10).toString(); // 1<br>
            dilation(1000000000).toString(); // 0.287348<br>
            dilation(CQ("v")).toString(); // 1 + 1.11111e-17*v**2**-1/2
          </code>

          <h4>Peak of projectile flight</h4>
          <code class="cb prettyprint">
            s = CQ("u*t + 0.5*a*t**2"); // Vertical position as a function of time.<br>
            maxT = s.differentiate("t").solve("t"); // Differentiate and equate to zero to find times where s is maximal or minimal.<br>
            s.sub({"t":maxT[0]}).toString(); // -((0.5*u**2)/a)<br>
          </code>
        </div>

      </article>
    </section>

      <div id="authors">This project is maintained by <a href="http://matthewja.com/">Matthew Alger</a> and <a href="https://github.com/bshlgrs">Buck Shlegeris</a>.</div><br>


    <script src="repl.js"></script>
  </body>
</html>
